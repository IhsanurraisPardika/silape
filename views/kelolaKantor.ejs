!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Kelola Kantor Tim</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex">

<!-- ================= SIDEBAR ================= -->
<aside class="hidden md:flex w-64 bg-red-700 text-white flex-col">
  <div class="h-16 flex items-center gap-3 px-4 border-b border-red-600">
    <img src="/images/sp.png" class="w-10 h-10 bg-white rounded-full p-1">
    <span class="font-semibold text-sm">PT SEMEN PADANG</span>
  </div>
</aside>

<!-- ================= MAIN ================= -->
<main class="flex-1 flex flex-col">

<header class="bg-white h-16 px-6 flex items-center shadow-md">
  <div class="ml-auto font-semibold">ADMIN TPM</div>
</header>

<section class="p-6 space-y-6">

<button id="btnTambahKantor"
  class="ml-auto px-4 py-2 bg-red-600 text-white rounded">
  Tambah Kantor
</button>

<div class="bg-white rounded-lg shadow p-6 space-y-6">

<!-- ================= TIM LOOP ================= -->
<!-- TIM 1 -->
<div>
  <div class="bg-red-600 text-white px-4 py-2 rounded font-semibold"
       data-tim="TIM 1">
    TIM 1 <span class="text-sm font-normal">| 0 Kantor Penugasan</span>
  </div>
  <div class="mt-3 space-y-3"></div>
</div>

<!-- TIM 2 -->
<div>
  <div class="bg-red-600 text-white px-4 py-2 rounded font-semibold"
       data-tim="TIM 2">
    TIM 2 <span class="text-sm font-normal">| 0 Kantor Penugasan</span>
  </div>
  <div class="mt-3 space-y-3"></div>
</div>

<!-- TIM 3 -->
<div>
  <div class="bg-red-600 text-white px-4 py-2 rounded font-semibold"
       data-tim="TIM 3">
    TIM 3 <span class="text-sm font-normal">| 0 Kantor Penugasan</span>
  </div>
  <div class="mt-3 space-y-3"></div>
</div>

<!-- TIM 4 -->
<div>
  <div class="bg-red-600 text-white px-4 py-2 rounded font-semibold"
       data-tim="TIM 4">
    TIM 4 <span class="text-sm font-normal">| 0 Kantor Penugasan</span>
  </div>
  <div class="mt-3 space-y-3"></div>
</div>

<!-- TIM 5 -->
<div>
  <div class="bg-red-600 text-white px-4 py-2 rounded font-semibold"
       data-tim="TIM 5">
    TIM 5 <span class="text-sm font-normal">| 0 Kantor Penugasan</span>
  </div>
  <div class="mt-3 space-y-3"></div>
</div>

</div>
</section>
</main>

<!-- ================= MODAL TAMBAH ================= -->
<div id="modalTambah"
 class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center">

<div class="bg-white w-full max-w-md rounded-lg">
  <div class="bg-red-600 text-white px-4 py-2 font-semibold">
    Tambah Kantor
  </div>

<form class="p-4 space-y-4">
  <select class="w-full border p-2" id="selectTim">
    <option value="TIM 1">TIM 1</option>
    <option value="TIM 2">TIM 2</option>
    <option value="TIM 3">TIM 3</option>
    <option value="TIM 4">TIM 4</option>
    <option value="TIM 5">TIM 5</option>
  <option value="TIM 6">TIM 6</option>
  <option value="TIM 7">TIM 7</option>
  <option value="TIM 8">TIM 8</option>
  <option value="TIM 9">TIM 9</option>
  <option value="TIM 10">TIM 10</option>
</select>

        <input id="namaKantor" class="w-full border p-2"
         placeholder="Nama Kantor">

  <div class="flex justify-end gap-2">
    <button type="button" id="btnBatal">Batal</button>
    <button class="bg-red-600 text-white px-4 py-2 rounded">Tambah</button>
  </div>
</form>
</div>
</div>

<!-- ================= MODAL DELETE ================= -->
<div id="modalDelete"
 class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center">

<div class="bg-white w-full max-w-sm rounded-lg">
  <div class="bg-red-600 text-white px-4 py-2 font-semibold">
    Konfirmasi Hapus
  </div>
  <div class="p-4 space-y-4">
    <p>Hapus <span id="deleteNama" class="font-semibold"></span>?</p>
    <div class="flex justify-end gap-2">
      <button id="batalDelete">Batal</button>
      <button id="confirmDelete"
        class="bg-red-600 text-white px-4 py-2 rounded">Hapus</button>
    </div>
  </div>
</div>
</div>

<!-- ================= SCRIPT FINAL ================= -->
<script>
const modalTambah = document.getElementById('modalTambah');
const modalDelete = document.getElementById('modalDelete');
const btnTambah = document.getElementById('btnTambahKantor');
const btnBatal = document.getElementById('btnBatal');
const selectTim = document.getElementById('selectTim');
const namaKantor = document.getElementById('namaKantor');
const deleteNama = document.getElementById('deleteNama');

let targetDelete = null;

btnTambah.onclick = () => modalTambah.classList.replace('hidden','flex');
btnBatal.onclick = () => modalTambah.classList.replace('flex','hidden');

function updateJumlah() {
  document.querySelectorAll('[data-tim]').forEach(h => {
    const list = h.parentElement.querySelector('.mt-3');
    h.querySelector('span').textContent =
      `| ${list.children.length} Kantor Penugasan`;
  });
}

document.querySelector('#modalTambah form').onsubmit = e => {
  e.preventDefault();
  const tim = selectTim.value;
  const nama = namaKantor.value.trim();
  if (!nama) return;

  const header = [...document.querySelectorAll('[data-tim]')]
    .find(h => h.dataset.tim === tim);

  const list = header.parentElement.querySelector('.mt-3');

  const div = document.createElement('div');
  div.className = 'border p-3 flex justify-between';
  div.innerHTML = `
    <span>üè¢ ${nama}</span>
    <button class="text-red-600">Delete</button>
  `;

  div.querySelector('button').onclick = () => {
    targetDelete = div;
    deleteNama.textContent = nama;
    modalDelete.classList.replace('hidden','flex');
  };

  list.appendChild(div);
  namaKantor.value = '';
  modalTambah.classList.replace('flex','hidden');
  updateJumlah();
};

document.getElementById('batalDelete').onclick =
() => modalDelete.classList.replace('flex','hidden');

document.getElementById('confirmDelete').onclick = () => {
  if (targetDelete) targetDelete.remove();
  modalDelete.classList.replace('flex','hidden');
  updateJumlah();
};

updateJumlah();
</script>

</body>
</html>